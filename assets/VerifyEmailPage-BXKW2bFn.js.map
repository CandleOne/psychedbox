{"version":3,"file":"VerifyEmailPage-BXKW2bFn.js","sources":["../../../client/src/pages/VerifyEmailPage.tsx"],"sourcesContent":["import SiteFooter from \"@/components/SiteFooter\";\nimport SiteNavbar from \"@/components/SiteNavbar\";\nimport { useSEO } from \"@/hooks/useSEO\";\nimport { useAuth } from \"@/contexts/AuthContext\";\nimport { useEffect, useState } from \"react\";\nimport { useSearch } from \"wouter\";\nimport { Loader2, CheckCircle2, XCircle } from \"lucide-react\";\nimport { Link } from \"wouter\";\n\nexport default function VerifyEmailPage() {\n  useSEO({\n    title: \"Verify Email — PsychedBox\",\n    description: \"Verify your email address for your PsychedBox account.\",\n    canonical: \"/verify-email\",\n  });\n\n  const search = useSearch();\n  const token = new URLSearchParams(search).get(\"token\");\n  const { refresh } = useAuth();\n  const [status, setStatus] = useState<\"loading\" | \"success\" | \"error\">(\"loading\");\n  const [message, setMessage] = useState(\"\");\n\n  useEffect(() => {\n    if (!token) {\n      setStatus(\"error\");\n      setMessage(\"Missing verification token. Please check the link in your email.\");\n      return;\n    }\n\n    fetch(\"/api/auth/verify-email\", {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({ token }),\n    })\n      .then(async (res) => {\n        const data = await res.json();\n        if (res.ok) {\n          setStatus(\"success\");\n          setMessage(data.message || \"Email verified successfully!\");\n          refresh(); // refresh user state\n        } else {\n          setStatus(\"error\");\n          setMessage(data.error || \"Verification failed.\");\n        }\n      })\n      .catch(() => {\n        setStatus(\"error\");\n        setMessage(\"Network error — please try again.\");\n      });\n  }, [token, refresh]);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <SiteNavbar />\n\n      <section style={{ backgroundColor: \"#FF6B6B\" }} className=\"px-6 py-16 md:py-20\">\n        <div className=\"max-w-5xl mx-auto\">\n          <p className=\"text-white/80 text-xs uppercase tracking-[0.2em] font-bold mb-4\">Account</p>\n          <h1 className=\"text-white text-4xl md:text-6xl font-black leading-tight max-w-3xl mb-6\">\n            Email Verification\n          </h1>\n        </div>\n      </section>\n\n      <section className=\"px-6 py-16\">\n        <div className=\"max-w-md mx-auto text-center\">\n          {status === \"loading\" && (\n            <div className=\"space-y-4\">\n              <Loader2 size={48} className=\"mx-auto animate-spin text-gray-400\" />\n              <p className=\"text-gray-600\">Verifying your email...</p>\n            </div>\n          )}\n\n          {status === \"success\" && (\n            <div className=\"space-y-4\">\n              <CheckCircle2 size={48} className=\"mx-auto text-green-500\" />\n              <h2 className=\"text-2xl font-bold text-gray-900\">Verified!</h2>\n              <p className=\"text-gray-600\">{message}</p>\n              <Link\n                href=\"/account\"\n                style={{ backgroundColor: \"#1a1a1a\" }}\n                className=\"inline-flex items-center justify-center px-6 py-3 rounded-lg text-white font-bold hover:opacity-90 transition-opacity mt-4\"\n              >\n                Go to Account\n              </Link>\n            </div>\n          )}\n\n          {status === \"error\" && (\n            <div className=\"space-y-4\">\n              <XCircle size={48} className=\"mx-auto text-red-500\" />\n              <h2 className=\"text-2xl font-bold text-gray-900\">Verification Failed</h2>\n              <p className=\"text-gray-600\">{message}</p>\n              <Link\n                href=\"/account\"\n                style={{ backgroundColor: \"#1a1a1a\" }}\n                className=\"inline-flex items-center justify-center px-6 py-3 rounded-lg text-white font-bold hover:opacity-90 transition-opacity mt-4\"\n              >\n                Go to Account\n              </Link>\n            </div>\n          )}\n        </div>\n      </section>\n\n      <SiteFooter />\n    </div>\n  );\n}\n"],"names":["VerifyEmailPage","useSEO","search","useSearch","token","refresh","useAuth","status","setStatus","useState","message","setMessage","useEffect","res","data","jsxs","jsx","SiteNavbar","Loader2","CheckCircle2","Link","XCircle","SiteFooter"],"mappings":"4NASA,SAAwBA,GAAkB,CACxCC,EAAO,CACL,MAAO,4BACP,YAAa,yDACb,UAAW,eAAA,CACZ,EAED,MAAMC,EAASC,EAAA,EACTC,EAAQ,IAAI,gBAAgBF,CAAM,EAAE,IAAI,OAAO,EAC/C,CAAE,QAAAG,CAAA,EAAYC,EAAA,EACd,CAACC,EAAQC,CAAS,EAAIC,EAAAA,SAA0C,SAAS,EACzE,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAE,EAEzCG,OAAAA,EAAAA,UAAU,IAAM,CACd,GAAI,CAACR,EAAO,CACVI,EAAU,OAAO,EACjBG,EAAW,kEAAkE,EAC7E,MACF,CAEA,MAAM,yBAA0B,CAC9B,OAAQ,OACR,QAAS,CAAE,eAAgB,kBAAA,EAC3B,KAAM,KAAK,UAAU,CAAE,MAAAP,EAAO,CAAA,CAC/B,EACE,KAAK,MAAOS,GAAQ,CACnB,MAAMC,EAAO,MAAMD,EAAI,KAAA,EACnBA,EAAI,IACNL,EAAU,SAAS,EACnBG,EAAWG,EAAK,SAAW,8BAA8B,EACzDT,EAAA,IAEAG,EAAU,OAAO,EACjBG,EAAWG,EAAK,OAAS,sBAAsB,EAEnD,CAAC,EACA,MAAM,IAAM,CACXN,EAAU,OAAO,EACjBG,EAAW,mCAAmC,CAChD,CAAC,CACL,EAAG,CAACP,EAAOC,CAAO,CAAC,EAGjBU,EAAAA,KAAC,MAAA,sDAAI,UAAU,wBACb,SAAA,CAAAC,EAAAA,IAACC,EAAA,CAAS,WAAA,yCAAA,CAAE,QAEX,UAAA,CAAM,WAAA,0CAAE,MAAO,CAAE,gBAAiB,WAAa,UAAU,sBACxD,SAAAF,EAAAA,KAAC,MAAA,CAAE,WAAA,0CAAE,UAAU,oBACb,SAAA,CAAAC,MAAC,IAAA,sDAAE,UAAU,kEAAkE,SAAA,UAAO,QACrF,KAAA,CAAC,WAAA,0CAAE,UAAU,0EAAyE,SAAA,oBAAA,CAEvF,CAAA,CAAA,CACF,CAAA,CACF,EAEAA,EAAAA,IAAC,UAAA,CAAM,WAAA,0CAAE,UAAU,aACjB,SAAAD,EAAAA,KAAC,MAAA,CAAE,WAAA,0CAAE,UAAU,+BACZ,SAAA,CAAAR,IAAW,WACVQ,EAAAA,KAAC,MAAA,CAAE,WAAA,0CAAE,UAAU,YACb,SAAA,CAAAC,MAACE,wDAAQ,KAAM,GAAI,UAAU,qCAAqC,QACjE,IAAA,CAAA,WAAA,0CAAE,UAAU,gBAAgB,SAAA,yBAAA,CAAuB,CAAA,EACtD,EAGDX,IAAW,WACVQ,EAAAA,KAAC,OAAE,WAAA,0CAAE,UAAU,YACb,SAAA,CAAAC,MAACG,GAAW,WAAA,0CAAE,KAAM,GAAI,UAAU,yBAAyB,QAC1D,KAAA,CAAC,WAAA,0CAAE,UAAU,mCAAmC,SAAA,YAAS,QACzD,IAAA,CAAA,WAAA,0CAAE,UAAU,gBAAiB,SAAAT,EAAQ,EACtCM,EAAAA,IAACI,EAAA,CAAG,WAAA,0CACF,KAAK,WACL,MAAO,CAAE,gBAAiB,SAAA,EAC1B,UAAU,6HACZ,SAAA,eAAA,CAAA,CAEA,EACF,EAGDb,IAAW,SACVQ,EAAAA,KAAC,OAAE,WAAA,0CAAE,UAAU,YACb,SAAA,CAAAC,MAACK,GAAM,WAAA,0CAAE,KAAM,GAAI,UAAU,uBAAuB,QACnD,KAAA,CAAC,WAAA,0CAAE,UAAU,mCAAmC,SAAA,sBAAmB,QACnE,IAAA,CAAA,WAAA,0CAAE,UAAU,gBAAiB,SAAAX,EAAQ,EACtCM,EAAAA,IAACI,EAAA,CAAG,WAAA,0CACF,KAAK,WACL,MAAO,CAAE,gBAAiB,SAAA,EAC1B,UAAU,6HACZ,SAAA,eAAA,CAAA,CAEA,CAAA,CACF,CAAA,CAAA,CAEJ,CAAA,CACF,EAEAJ,EAAAA,IAACM,EAAA,CAAS,WAAA,0CAAA,CAAE,CAAA,EACd,CAEJ"}