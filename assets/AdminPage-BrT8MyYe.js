import{i as B,c as ne,n as Q,o as ie,j as e,S as H,L as D,a as J,m as de,U as re,M as oe,v as Y,t as Z,d as ge,w as X}from"./index-BDylZcvu.js";import{a,R as xe}from"./sentry-CV5hkgyg.js";import{a as me,S as pe}from"./shopping-bag-53nexDYJ.js";import{C as K}from"./circle-check-big-Bfavpt4D.js";/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ue=B("Activity",[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ee=B("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=B("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=B("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const te=B("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=B("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G=B("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const he=B("Play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]]);/**
 * @license lucide-react v0.453.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const I=B("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);async function f(t,m){const l=await fetch(t,{...m,headers:{"Content-Type":"application/json",...m?.headers}});if(!l.ok){const p=await l.json().catch(()=>({}));throw new Error(p.error||`HTTP ${l.status}`)}return l.json()}const ye=[{id:"overview",label:"Overview",icon:ue},{id:"users",label:"Users",icon:re},{id:"blog",label:"Blog Posts",icon:G},{id:"orders",label:"Orders",icon:me},{id:"subscribers",label:"Subscribers",icon:oe},{id:"email",label:"Email",icon:I},{id:"database",label:"Database",icon:se}];function ze(){ne({title:"Admin Dashboard — PsychedBox",description:"Admin dashboard for managing PsychedBox users, blog posts, subscribers, and database.",noIndex:!0});const{user:t,loading:m,isAdmin:l}=Q();ie();const[p,c]=a.useState("overview");return m?e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:89",className:"min-h-screen bg-white",children:[e.jsx(H,{"data-loc":"client/src/pages/AdminPage.tsx:90"}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:91",className:"flex items-center justify-center py-32",children:e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:92",size:32,className:"animate-spin text-gray-400"})}),e.jsx(J,{"data-loc":"client/src/pages/AdminPage.tsx:94"})]}):!t||!l?e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:101",className:"min-h-screen bg-white",children:[e.jsx(H,{"data-loc":"client/src/pages/AdminPage.tsx:102"}),e.jsx("section",{"data-loc":"client/src/pages/AdminPage.tsx:103",style:{backgroundColor:"#FF6B6B"},className:"px-6 py-16 md:py-20",children:e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:104",className:"max-w-5xl mx-auto",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:105",className:"text-white/80 text-xs uppercase tracking-[0.2em] font-bold mb-4",children:"Admin"}),e.jsx("h1",{"data-loc":"client/src/pages/AdminPage.tsx:106",className:"text-white text-4xl md:text-6xl font-black leading-tight max-w-3xl mb-6",children:"Access Denied"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:107",className:"text-white text-lg md:text-xl max-w-3xl",children:"You need admin privileges to view this page."})]})}),e.jsx("section",{"data-loc":"client/src/pages/AdminPage.tsx:112",className:"px-6 py-16 text-center",children:e.jsx(de,{"data-loc":"client/src/pages/AdminPage.tsx:113",href:"/account",className:"text-[#FF6B6B] font-semibold hover:underline",children:"Back to Account"})}),e.jsx(J,{"data-loc":"client/src/pages/AdminPage.tsx:117"})]}):e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:123",className:"min-h-screen bg-gray-50",children:[e.jsx(H,{"data-loc":"client/src/pages/AdminPage.tsx:124"}),e.jsx("section",{"data-loc":"client/src/pages/AdminPage.tsx:126",style:{backgroundColor:"#FF6B6B"},className:"px-6 py-12 md:py-16",children:e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:127",className:"max-w-7xl mx-auto",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:128",className:"text-white/80 text-xs uppercase tracking-[0.2em] font-bold mb-3",children:"Admin"}),e.jsx("h1",{"data-loc":"client/src/pages/AdminPage.tsx:129",className:"text-white text-3xl md:text-5xl font-black leading-tight",children:"Dashboard"})]})}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:134",className:"sticky top-0 z-10 bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:135",className:"max-w-7xl mx-auto px-6",children:e.jsx("nav",{"data-loc":"client/src/pages/AdminPage.tsx:136",className:"flex gap-1 -mb-px overflow-x-auto",children:ye.map(g=>e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:138",onClick:()=>c(g.id),className:`flex items-center gap-1.5 px-4 py-3 text-sm font-medium border-b-2 transition-colors whitespace-nowrap ${p===g.id?"border-[#FF6B6B] text-[#FF6B6B]":"border-transparent text-gray-500 hover:text-gray-700"}`,children:[e.jsx(g.icon,{"data-loc":"client/src/pages/AdminPage.tsx:147",size:15}),g.label]},g.id))})})}),e.jsx("section",{"data-loc":"client/src/pages/AdminPage.tsx:155",className:"px-6 py-8",children:e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:156",className:"max-w-7xl mx-auto",children:[p==="overview"&&e.jsx(be,{"data-loc":"client/src/pages/AdminPage.tsx:157"}),p==="users"&&e.jsx(Pe,{"data-loc":"client/src/pages/AdminPage.tsx:158"}),p==="blog"&&e.jsx(Ae,{"data-loc":"client/src/pages/AdminPage.tsx:159"}),p==="orders"&&e.jsx(ve,{"data-loc":"client/src/pages/AdminPage.tsx:160"}),p==="subscribers"&&e.jsx(Ne,{"data-loc":"client/src/pages/AdminPage.tsx:161"}),p==="email"&&e.jsx(we,{"data-loc":"client/src/pages/AdminPage.tsx:162"}),p==="database"&&e.jsx(Be,{"data-loc":"client/src/pages/AdminPage.tsx:163"})]})}),e.jsx(J,{"data-loc":"client/src/pages/AdminPage.tsx:167"})]})}function be(){const[t,m]=a.useState(null),[l,p]=a.useState(!0);return a.useEffect(()=>{f("/api/admin/stats").then(m).finally(()=>p(!1))},[]),l?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:182"}):t?e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:186",className:"space-y-8",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:188",className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4",children:[e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:189",label:"Users",value:t.users}),e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:190",label:"Admins",value:t.admins}),e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:191",label:"Subscribers",value:t.subscribers}),e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:192",label:"Blog Posts",value:t.blogPosts}),e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:193",label:"Published",value:t.publishedPosts}),e.jsx(O,{"data-loc":"client/src/pages/AdminPage.tsx:194",label:"Active Sessions",value:t.activeSessions})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:198",className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:199",className:"text-lg font-bold text-gray-900 mb-4",children:"Users by Plan"}),t.usersByPlan.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:201",className:"text-gray-500 text-sm",children:"No data yet"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:203",className:"space-y-3",children:t.usersByPlan.map(c=>{const g=t.users>0?Math.round(c.count/t.users*100):0;return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:207",className:"flex items-center gap-3",children:[e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:208",className:"text-sm font-medium text-gray-700 w-24 capitalize",children:c.plan}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:209",className:"flex-1 h-6 bg-gray-100 rounded-full overflow-hidden",children:e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:210",className:"h-full rounded-full",style:{width:`${Math.max(g,2)}%`,backgroundColor:"#FF6B6B"}})}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:215",className:"text-sm text-gray-500 w-20 text-right",children:[c.count," (",g,"%)"]})]},c.plan)})})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:224",className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:225",className:"text-lg font-bold text-gray-900 mb-4",children:"Signups (Last 30 Days)"}),t.signupsByDay.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:227",className:"text-gray-500 text-sm",children:"No signups yet"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:229",className:"flex items-end gap-1 h-40",children:t.signupsByDay.map(c=>{const g=Math.max(...t.signupsByDay.map(y=>y.count),1),d=Math.max(c.count/g*100,4);return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:234",className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:235",className:"text-[10px] text-gray-400",children:c.count}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:236",className:"w-full rounded-t",style:{height:`${d}%`,backgroundColor:"#FF6B6B",minHeight:4},title:`${c.date}: ${c.count}`}),e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:241",className:"text-[9px] text-gray-400 -rotate-45 origin-top-left mt-1 whitespace-nowrap",children:c.date.slice(5)})]},c.date)})})]})]}):e.jsx(V,{"data-loc":"client/src/pages/AdminPage.tsx:183",message:"Failed to load stats"})}function Pe(){const[t,m]=a.useState([]),[l,p]=a.useState(0),[c,g]=a.useState(""),[d,y]=a.useState(1),[x,b]=a.useState(!0),{user:r}=Q(),s=a.useCallback(async()=>{b(!0);try{const n=await f(`/api/admin/users?page=${d}&search=${encodeURIComponent(c)}`);m(n.users),p(n.total)}finally{b(!1)}},[d,c]);a.useEffect(()=>{s()},[s]);async function h(n){const u=n.role==="admin"?"user":"admin";await f(`/api/admin/users/${n.id}/role`,{method:"PATCH",body:JSON.stringify({role:u})}),s()}async function j(n){confirm(`Delete user ${n.email}? This cannot be undone.`)&&(await f(`/api/admin/users/${n.id}`,{method:"DELETE"}),s())}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:290",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:291",className:"flex items-center gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:292",className:"relative flex-1 max-w-md",children:[e.jsx(Y,{"data-loc":"client/src/pages/AdminPage.tsx:293",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:294",type:"text",placeholder:"Search by email or name…",value:c,onChange:n=>{g(n.target.value),y(1)},className:"w-full pl-9 pr-4 py-2 rounded-lg border border-gray-300 text-sm focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none"})]}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:302",className:"text-sm text-gray-500",children:[l," total"]})]}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:305",className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:x?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:307"}):t.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:309",className:"p-6 text-gray-500 text-sm text-center",children:"No users found"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:311",className:"overflow-x-auto",children:e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:312",className:"w-full text-sm",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:313",children:e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:314",className:"text-left text-gray-500 border-b border-gray-100",children:[e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:315",className:"px-4 py-3 font-medium",children:"ID"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:316",className:"px-4 py-3 font-medium",children:"Email"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:317",className:"px-4 py-3 font-medium",children:"Name"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:318",className:"px-4 py-3 font-medium",children:"Role"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:319",className:"px-4 py-3 font-medium",children:"Plan"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:320",className:"px-4 py-3 font-medium",children:"Joined"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:321",className:"px-4 py-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:324",children:t.map(n=>e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:326",className:"border-b border-gray-50 hover:bg-gray-50",children:[e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:327",className:"px-4 py-3 text-gray-400",children:n.id}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:328",className:"px-4 py-3 font-medium text-gray-900",children:n.email}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:329",className:"px-4 py-3 text-gray-600",children:n.name||"—"}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:330",className:"px-4 py-3",children:e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:331",className:`px-2 py-0.5 rounded-full text-xs font-medium ${n.role==="admin"?"bg-red-100 text-red-700":"bg-gray-100 text-gray-600"}`,children:n.role})}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:335",className:"px-4 py-3 text-gray-600 capitalize",children:n.plan||"free"}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:336",className:"px-4 py-3 text-gray-400",children:new Date(n.created_at).toLocaleDateString()}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:337",className:"px-4 py-3",children:e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:338",className:"flex gap-1",children:[e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:339",onClick:()=>h(n),className:"p-1.5 rounded hover:bg-gray-100 text-gray-500",title:n.role==="admin"?"Demote to user":"Promote to admin",children:e.jsx(pe,{"data-loc":"client/src/pages/AdminPage.tsx:344",size:14})}),n.id!==r?.id&&e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:347",onClick:()=>j(n),className:"p-1.5 rounded hover:bg-red-50 text-red-400",title:"Delete",children:e.jsx(Z,{"data-loc":"client/src/pages/AdminPage.tsx:348",size:14})})]})})]},n.id))})]})})}),l>50&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:362",className:"flex justify-center gap-2",children:[e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:363",disabled:d<=1,onClick:()=>y(n=>n-1),className:"px-3 py-1 rounded border text-sm disabled:opacity-40",children:"Prev"}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:364",className:"px-3 py-1 text-sm text-gray-500",children:["Page ",d]}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:365",disabled:d*50>=l,onClick:()=>y(n=>n+1),className:"px-3 py-1 rounded border text-sm disabled:opacity-40",children:"Next"})]})]})}function Ae(){const[t,m]=a.useState([]),[l,p]=a.useState(!0),[c,g]=a.useState(!1),[d,y]=a.useState(null),x=a.useCallback(async()=>{p(!0);try{const s=await f("/api/admin/blog");m(s.posts)}finally{p(!1)}},[]);a.useEffect(()=>{x()},[x]);async function b(s){const h=await f(`/api/admin/blog/${s.id}`);await f(`/api/admin/blog/${s.id}`,{method:"PUT",body:JSON.stringify({...h.post,tags:JSON.parse(h.post.tags||"[]"),body:JSON.parse(h.post.body||"[]"),published:!s.published})}),x()}async function r(s){confirm(`Delete "${s.title}"? This cannot be undone.`)&&(await f(`/api/admin/blog/${s.id}`,{method:"DELETE"}),x())}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:408",className:"space-y-4",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:409",className:"flex items-center justify-between",children:[e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:410",className:"text-sm text-gray-500",children:[t.length," posts"]}),e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:411",onClick:()=>g(!c),className:"inline-flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold text-white",style:{backgroundColor:"#FF6B6B"},children:[e.jsx(ge,{"data-loc":"client/src/pages/AdminPage.tsx:416",size:14}),"New Post"]})]}),c&&e.jsx(je,{"data-loc":"client/src/pages/AdminPage.tsx:421",onCreated:()=>{g(!1),x()},onCancel:()=>g(!1)}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:423",className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:l?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:425"}):t.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:427",className:"p-6 text-gray-500 text-sm text-center",children:"No blog posts yet"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:429",className:"overflow-x-auto",children:e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:430",className:"w-full text-sm",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:431",children:e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:432",className:"text-left text-gray-500 border-b border-gray-100",children:[e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:433",className:"px-4 py-3 font-medium",children:"Title"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:434",className:"px-4 py-3 font-medium",children:"Slug"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:435",className:"px-4 py-3 font-medium",children:"Category"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:436",className:"px-4 py-3 font-medium",children:"Status"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:437",className:"px-4 py-3 font-medium",children:"Author"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:438",className:"px-4 py-3 font-medium",children:"Created"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:439",className:"px-4 py-3 font-medium",children:"Actions"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:442",children:t.map(s=>e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:444",className:"border-b border-gray-50 hover:bg-gray-50",children:[e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:445",className:"px-4 py-3 font-medium text-gray-900 max-w-xs truncate",children:s.title}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:446",className:"px-4 py-3 text-gray-500 text-xs font-mono",children:s.slug}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:447",className:"px-4 py-3 text-gray-600",children:s.category}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:448",className:"px-4 py-3",children:e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:449",className:`px-2 py-0.5 rounded-full text-xs font-medium ${s.published?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:s.published?"Published":"Draft"})}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:453",className:"px-4 py-3 text-gray-600",children:s.author}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:454",className:"px-4 py-3 text-gray-400",children:new Date(s.created_at).toLocaleDateString()}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:455",className:"px-4 py-3",children:e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:456",className:"flex gap-1",children:[e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:457",onClick:()=>b(s),className:"p-1.5 rounded hover:bg-gray-100 text-gray-500",title:s.published?"Unpublish":"Publish",children:s.published?e.jsx(te,{"data-loc":"client/src/pages/AdminPage.tsx:458",size:14}):e.jsx(ce,{"data-loc":"client/src/pages/AdminPage.tsx:458",size:14})}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:460",onClick:()=>y(s.id),className:"p-1.5 rounded hover:bg-blue-50 text-blue-500",title:"Edit",children:e.jsx(G,{"data-loc":"client/src/pages/AdminPage.tsx:461",size:14})}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:463",onClick:()=>r(s),className:"p-1.5 rounded hover:bg-red-50 text-red-400",title:"Delete",children:e.jsx(Z,{"data-loc":"client/src/pages/AdminPage.tsx:464",size:14})})]})})]},s.id))})]})})}),d&&e.jsx(fe,{"data-loc":"client/src/pages/AdminPage.tsx:477",postId:d,onSaved:()=>{y(null),x()},onCancel:()=>y(null)})]})}function je({onCreated:t,onCancel:m}){const[l,p]=a.useState(""),[c,g]=a.useState(""),[d,y]=a.useState(""),[x,b]=a.useState("News"),[r,s]=a.useState("PsychedBox Team"),[h,j]=a.useState(""),[n,u]=a.useState(!1),[v,w]=a.useState(""),[C,i]=a.useState(""),[A,F]=a.useState(!1),[k,L]=a.useState(""),[T,$]=a.useState(!1);function U(P){return P.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"")}async function R(P){P.preventDefault(),L(""),$(!0);const M=h.split(/\n\n+/).filter(Boolean).map(o=>({type:"text",content:o.trim()}));try{await f("/api/admin/blog",{method:"POST",body:JSON.stringify({title:l,slug:c||U(l),description:d,category:x,author:r,body:M,published:n,image:v,image_alt:C,tags:[],read_time:`${Math.max(1,Math.ceil(h.split(/\s+/).length/200))} min read`})}),t()}catch(o){L(o.message)}finally{$(!1)}}async function q(P){const M=P.target.files?.[0];if(!M)return;F(!0),L("");const o=new FormData;o.append("image",M);try{const S=await fetch("/api/admin/upload",{method:"POST",body:o});if(!S.ok)throw new Error("Upload failed");const E=await S.json();w(E.url)}catch{L("Image upload failed")}finally{F(!1)}}return e.jsxs("form",{"data-loc":"client/src/pages/AdminPage.tsx:559",onSubmit:R,className:"bg-white rounded-xl border border-gray-200 p-6 space-y-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:560",className:"text-lg font-bold text-gray-900",children:"Create Blog Post"}),k&&e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:561",className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:k}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:563",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:564",label:"Title",required:!0,children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:565",type:"text",required:!0,value:l,onChange:P=>{p(P.target.value),c||g(U(P.target.value))},className:"input-field",placeholder:"My Post Title"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:574",label:"Slug",required:!0,children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:575",type:"text",required:!0,value:c,onChange:P=>g(P.target.value),className:"input-field",placeholder:"my-post-title"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:577",label:"Category",children:e.jsx("select",{"data-loc":"client/src/pages/AdminPage.tsx:578",value:x,onChange:P=>b(P.target.value),className:"input-field",children:["News","Education","Culture","Guides","Science","Community"].map(P=>e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:580",value:P,children:P},P))})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:584",label:"Author",children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:585",type:"text",value:r,onChange:P=>s(P.target.value),className:"input-field"})})]}),e.jsxs(N,{"data-loc":"client/src/pages/AdminPage.tsx:590",label:"Image",children:[e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:591",type:"file",accept:"image/*",onChange:q,className:"input-field"}),A&&e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:592",className:"text-xs text-gray-500 ml-2",children:"Uploading…"}),v&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:594",className:"mt-2",children:[e.jsx("img",{"data-loc":"client/src/pages/AdminPage.tsx:595",src:v,alt:"Preview",className:"max-h-32 rounded border"}),e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:596",type:"text",value:C,onChange:P=>i(P.target.value),className:"input-field mt-2",placeholder:"Image alt text (for accessibility)"})]})]}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:607",label:"Description",children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:608",type:"text",value:d,onChange:P=>y(P.target.value),className:"input-field",placeholder:"Short summary…"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:611",label:"Body (paragraphs separated by blank lines)",children:e.jsx("textarea",{"data-loc":"client/src/pages/AdminPage.tsx:612",rows:8,value:h,onChange:P=>j(P.target.value),className:"input-field font-mono text-sm",placeholder:`First paragraph...

Second paragraph...`})}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:621",className:"flex items-center gap-2",children:[e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:622",id:"published",type:"checkbox",checked:n,onChange:P=>u(P.target.checked),className:"rounded"}),e.jsx("label",{"data-loc":"client/src/pages/AdminPage.tsx:623",htmlFor:"published",className:"text-sm text-gray-700",children:"Publish immediately"})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:626",className:"flex gap-2 pt-2",children:[e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:627",type:"submit",disabled:T,style:{backgroundColor:"#1a1a1a"},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-white text-sm font-bold hover:opacity-90 disabled:opacity-50",children:[T&&e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:633",size:14,className:"animate-spin"}),T?"Saving…":"Create Post"]}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:636",type:"button",onClick:m,className:"px-5 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Cancel"})]})]})}function fe({postId:t,onSaved:m,onCancel:l}){const[p,c]=a.useState(""),[g,d]=a.useState(""),[y,x]=a.useState(""),[b,r]=a.useState("News"),[s,h]=a.useState(""),[j,n]=a.useState(""),[u,v]=a.useState(!1),[w,C]=a.useState(""),[i,A]=a.useState(""),[F,k]=a.useState(!1),[L,T]=a.useState(""),[$,U]=a.useState(!1),[R,q]=a.useState(!0);a.useEffect(()=>{f(`/api/admin/blog/${t}`).then(({post:o})=>{c(o.title||""),d(o.slug||""),x(o.description||""),r(o.category||"News"),h(o.author||""),n(Array.isArray(o.body)?o.body.map(S=>S.content||S.text||"").join(`

`):""),v(!!o.published),C(o.image||""),A(o.image_alt||""),q(!1)})},[t]);async function P(o){o.preventDefault(),T(""),U(!0);const S=j.split(/\n\n+/).filter(Boolean).map(E=>({type:"text",content:E.trim()}));try{await f(`/api/admin/blog/${t}`,{method:"PUT",body:JSON.stringify({title:p,slug:g,description:y,category:b,author:s,body:S,published:u,image:w,image_alt:i})}),m()}catch(E){T(E.message)}finally{U(!1)}}async function M(o){const S=o.target.files?.[0];if(!S)return;k(!0),T("");const E=new FormData;E.append("image",S);try{const _=await fetch("/api/admin/upload",{method:"POST",body:E});if(!_.ok)throw new Error("Upload failed");const le=await _.json();C(le.url)}catch{T("Image upload failed")}finally{k(!1)}}return R?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:727"}):e.jsxs("form",{"data-loc":"client/src/pages/AdminPage.tsx:730",onSubmit:P,className:"bg-white rounded-xl border border-blue-200 p-6 space-y-4 my-4",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:731",className:"text-lg font-bold text-blue-900",children:"Edit Blog Post"}),L&&e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:732",className:"bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:L}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:734",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:735",label:"Title",required:!0,children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:736",type:"text",required:!0,value:p,onChange:o=>c(o.target.value),className:"input-field",placeholder:"My Post Title"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:738",label:"Slug",required:!0,children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:739",type:"text",required:!0,value:g,onChange:o=>d(o.target.value),className:"input-field",placeholder:"my-post-title"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:741",label:"Category",children:e.jsx("select",{"data-loc":"client/src/pages/AdminPage.tsx:742",value:b,onChange:o=>r(o.target.value),className:"input-field",children:["News","Education","Culture","Guides","Science","Community"].map(o=>e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:744",value:o,children:o},o))})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:748",label:"Author",children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:749",type:"text",value:s,onChange:o=>h(o.target.value),className:"input-field"})})]}),e.jsxs(N,{"data-loc":"client/src/pages/AdminPage.tsx:753",label:"Image",children:[e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:754",type:"file",accept:"image/*",onChange:M,className:"input-field"}),F&&e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:755",className:"text-xs text-gray-500 ml-2",children:"Uploading…"}),w&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:757",className:"mt-2",children:[e.jsx("img",{"data-loc":"client/src/pages/AdminPage.tsx:758",src:w,alt:"Preview",className:"max-h-32 rounded border"}),e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:759",type:"text",value:i,onChange:o=>A(o.target.value),className:"input-field mt-2",placeholder:"Image alt text (for accessibility)"})]})]}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:764",label:"Description",children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:765",type:"text",value:y,onChange:o=>x(o.target.value),className:"input-field",placeholder:"Short summary…"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:768",label:"Body (paragraphs separated by blank lines)",children:e.jsx("textarea",{"data-loc":"client/src/pages/AdminPage.tsx:769",rows:8,value:j,onChange:o=>n(o.target.value),className:"input-field font-mono text-sm",placeholder:`First paragraph...

Second paragraph...`})}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:772",className:"flex items-center gap-2",children:[e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:773",id:"published-edit",type:"checkbox",checked:u,onChange:o=>v(o.target.checked),className:"rounded"}),e.jsx("label",{"data-loc":"client/src/pages/AdminPage.tsx:774",htmlFor:"published-edit",className:"text-sm text-gray-700",children:"Published"})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:777",className:"flex gap-2 pt-2",children:[e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:778",type:"submit",disabled:$,style:{backgroundColor:"#2563EB"},className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-white text-sm font-bold hover:opacity-90 disabled:opacity-50",children:[$?e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:779",size:14,className:"animate-spin"}):e.jsx(G,{"data-loc":"client/src/pages/AdminPage.tsx:779",size:14}),$?"Saving…":"Save Changes"]}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:782",type:"button",onClick:l,className:"px-5 py-2.5 rounded-lg text-sm font-medium text-gray-600 hover:bg-gray-100",children:"Cancel"})]})]})}function Ne(){const[t,m]=a.useState([]),[l,p]=a.useState(0),[c,g]=a.useState(!0),[d,y]=a.useState(1),x=()=>{g(!0),f(`/api/admin/subscribers?page=${d}`).then(r=>{m(r.subscribers),p(r.total)}).finally(()=>g(!1))};a.useEffect(()=>{x()},[d]);const b=async(r,s)=>{if(confirm(`Remove ${s} from the mailing list?`))try{await f(`/api/admin/subscribers/${r}`,{method:"DELETE"}),x()}catch{alert("Failed to remove subscriber")}};return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:818",className:"space-y-4",children:[e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:819",className:"text-sm text-gray-500",children:[l," subscribers"]}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:821",className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:c?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:823"}):t.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:825",className:"p-6 text-gray-500 text-sm text-center",children:"No subscribers yet"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:827",className:"overflow-x-auto",children:e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:828",className:"w-full text-sm",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:829",children:e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:830",className:"text-left text-gray-500 border-b border-gray-100",children:[e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:831",className:"px-4 py-3 font-medium",children:"ID"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:832",className:"px-4 py-3 font-medium",children:"Email"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:833",className:"px-4 py-3 font-medium",children:"Source"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:834",className:"px-4 py-3 font-medium",children:"Subscribed"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:835",className:"px-4 py-3 font-medium"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:838",children:t.map(r=>e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:840",className:"border-b border-gray-50 hover:bg-gray-50",children:[e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:841",className:"px-4 py-3 text-gray-400",children:r.id}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:842",className:"px-4 py-3 font-medium text-gray-900",children:r.email}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:843",className:"px-4 py-3 text-gray-600",children:r.source}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:844",className:"px-4 py-3 text-gray-400",children:new Date(r.created_at).toLocaleDateString()}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:845",className:"px-4 py-3",children:e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:846",onClick:()=>b(r.id,r.email),className:"text-red-500 hover:text-red-700 text-xs font-medium",children:"Remove"})})]},r.id))})]})})}),l>50&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:862",className:"flex justify-center gap-2",children:[e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:863",disabled:d<=1,onClick:()=>y(r=>r-1),className:"px-3 py-1 rounded border text-sm disabled:opacity-40",children:"Prev"}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:864",className:"px-3 py-1 text-sm text-gray-500",children:["Page ",d]}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:865",disabled:d*50>=l,onClick:()=>y(r=>r+1),className:"px-3 py-1 rounded border text-sm disabled:opacity-40",children:"Next"})]})]})}const W=["completed","shipped","pending","refunded","cancelled"];function ve(){const[t,m]=a.useState([]),[l,p]=a.useState(!0),[c,g]=a.useState(""),[d,y]=a.useState(""),[x,b]=a.useState(1),[r,s]=a.useState(0),[h,j]=a.useState(null),n=25,u=a.useCallback(async()=>{p(!0);try{const i=new URLSearchParams({page:String(x),limit:String(n)});c&&i.set("search",c),d&&i.set("status",d);const A=await f(`/api/admin/orders?${i}`);m(A.orders),s(A.total)}catch{m([])}p(!1)},[x,c,d]);a.useEffect(()=>{u()},[u]);async function v(i,A){try{await f(`/api/admin/orders/${i}/status`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({status:A})}),m(F=>F.map(k=>k.id===i?{...k,status:A}:k))}catch{}}const w=Math.ceil(r/n),C=i=>{switch(i){case"completed":return"bg-green-100 text-green-700";case"shipped":return"bg-blue-100 text-blue-700";case"pending":return"bg-yellow-100 text-yellow-700";case"refunded":return"bg-orange-100 text-orange-700";case"cancelled":return"bg-red-100 text-red-700";default:return"bg-gray-100 text-gray-700"}};return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:943",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:945",className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:946",className:"relative flex-1",children:[e.jsx(Y,{"data-loc":"client/src/pages/AdminPage.tsx:947",size:16,className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:948",type:"text",placeholder:"Search by email, item, or session ID...",value:c,onChange:i=>{g(i.target.value),b(1)},className:"w-full pl-9 pr-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-[#FF6B6B]"})]}),e.jsxs("select",{"data-loc":"client/src/pages/AdminPage.tsx:956",value:d,onChange:i=>{y(i.target.value),b(1)},className:"px-3 py-2 rounded-lg border border-gray-200 text-sm focus:outline-none focus:ring-2 focus:ring-[#FF6B6B] bg-white",children:[e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:961",value:"",children:"All statuses"}),W.map(i=>e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:963",value:i,children:i.charAt(0).toUpperCase()+i.slice(1)},i))]})]}),e.jsxs("p",{"data-loc":"client/src/pages/AdminPage.tsx:969",className:"text-sm text-gray-500",children:[r," order",r!==1?"s":""," found"]}),l?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:971"}):t.length===0?e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:972",className:"bg-white rounded-xl border border-gray-200 p-8 text-center text-gray-500",children:"No orders found."}):e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:976",className:"bg-white rounded-xl border border-gray-200 overflow-hidden",children:[e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:977",className:"overflow-x-auto",children:e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:978",className:"w-full text-sm",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:979",children:e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:980",className:"text-gray-500 text-xs uppercase tracking-wide border-b border-gray-100",children:[e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:981",className:"text-left px-4 py-3 font-medium",children:"#"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:982",className:"text-left px-4 py-3 font-medium",children:"Date"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:983",className:"text-left px-4 py-3 font-medium",children:"Customer"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:984",className:"text-left px-4 py-3 font-medium",children:"Item"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:985",className:"text-right px-4 py-3 font-medium",children:"Amount"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:986",className:"text-left px-4 py-3 font-medium",children:"Status"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:987",className:"text-left px-4 py-3 font-medium w-8"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:990",children:t.map(i=>e.jsxs(xe.Fragment,{children:[e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:993",className:"border-b border-gray-50 hover:bg-gray-50 cursor-pointer",onClick:()=>j(h===i.id?null:i.id),children:[e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:997",className:"px-4 py-3 text-gray-400 font-mono text-xs",children:i.id}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:998",className:"px-4 py-3 whitespace-nowrap",children:new Date(i.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})}),e.jsxs("td",{"data-loc":"client/src/pages/AdminPage.tsx:1001",className:"px-4 py-3",children:[e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1002",className:"font-medium text-gray-900",children:i.user_name||"—"}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1003",className:"text-gray-500 text-xs",children:i.email})]}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1005",className:"px-4 py-3 max-w-[200px] truncate",title:i.item_summary,children:i.item_summary}),e.jsxs("td",{"data-loc":"client/src/pages/AdminPage.tsx:1008",className:"px-4 py-3 text-right font-semibold whitespace-nowrap",children:["$",(i.amount_cents/100).toFixed(2)]}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1011",className:"px-4 py-3",children:e.jsx("select",{"data-loc":"client/src/pages/AdminPage.tsx:1012",value:i.status,onChange:A=>{A.stopPropagation(),v(i.id,A.target.value)},onClick:A=>A.stopPropagation(),className:`text-xs font-medium px-2 py-1 rounded-full border-0 cursor-pointer ${C(i.status)}`,children:W.map(A=>e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:1019",value:A,children:A.charAt(0).toUpperCase()+A.slice(1)},A))})}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1023",className:"px-4 py-3 text-gray-400",children:h===i.id?e.jsx(ae,{"data-loc":"client/src/pages/AdminPage.tsx:1024",size:14}):e.jsx(ee,{"data-loc":"client/src/pages/AdminPage.tsx:1024",size:14})})]}),h===i.id&&e.jsx("tr",{"data-loc":"client/src/pages/AdminPage.tsx:1028",children:e.jsxs("td",{"data-loc":"client/src/pages/AdminPage.tsx:1029",colSpan:7,className:"px-4 py-4 bg-gray-50 border-b border-gray-100",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1030",className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1031",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1032",className:"text-gray-500 mb-1",children:"Stripe Session"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1033",className:"font-mono text-gray-700 break-all",children:i.stripe_session_id})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1035",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1036",className:"text-gray-500 mb-1",children:"Plan"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1037",className:"text-gray-700",children:i.plan_id||"—"})]})]}),i.items.length>0&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1041",className:"mt-3 pt-3 border-t border-gray-200",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1042",className:"text-xs text-gray-500 mb-2 font-medium",children:"Line Items"}),e.jsx("ul",{"data-loc":"client/src/pages/AdminPage.tsx:1043",className:"space-y-1 text-xs text-gray-700",children:i.items.map((A,F)=>e.jsxs("li",{"data-loc":"client/src/pages/AdminPage.tsx:1045",className:"flex justify-between",children:[e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1046",children:[A.name,A.variant?` (${A.variant})`:"",A.quantity>1?` × ${A.quantity}`:""]}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1051",className:"text-gray-400",children:["$",(A.price_cents/100).toFixed(2)]})]},F))})]})]})})]},i.id))})]})}),w>1&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1068",className:"flex items-center justify-between px-4 py-3 border-t border-gray-100",children:[e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:1069",onClick:()=>b(i=>Math.max(1,i-1)),disabled:x===1,className:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-40",children:"Previous"}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1076",className:"text-xs text-gray-500",children:["Page ",x," of ",w]}),e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:1077",onClick:()=>b(i=>Math.min(w,i+1)),disabled:x>=w,className:"px-3 py-1 rounded text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-40",children:"Next"})]})]})]})}function we(){const[t,m]=a.useState("newsletter");return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1102",className:"space-y-6",children:[e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1104",className:"flex gap-2",children:[{id:"newsletter",label:"Send Newsletter"},{id:"blog-notify",label:"Blog Notification"},{id:"test",label:"Test Email"}].map(l=>e.jsx("button",{"data-loc":"client/src/pages/AdminPage.tsx:1110",onClick:()=>m(l.id),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors ${t===l.id?"bg-[#FF6B6B] text-white":"bg-white border border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:l.label},l.id))}),t==="newsletter"&&e.jsx(Se,{"data-loc":"client/src/pages/AdminPage.tsx:1124"}),t==="blog-notify"&&e.jsx(Ce,{"data-loc":"client/src/pages/AdminPage.tsx:1125"}),t==="test"&&e.jsx(ke,{"data-loc":"client/src/pages/AdminPage.tsx:1126"})]})}function Se(){const[t,m]=a.useState(""),[l,p]=a.useState(""),[c,g]=a.useState(!1),[d,y]=a.useState(null),[x,b]=a.useState(""),[r,s]=a.useState(!1);async function h(){if(!(!t.trim()||!l.trim())&&confirm("Send this newsletter to ALL subscribers?")){g(!0),b(""),y(null);try{const j=await f("/api/admin/email/newsletter",{method:"POST",body:JSON.stringify({subject:t,bodyHtml:l})});y(j)}catch(j){b(j.message)}finally{g(!1)}}}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1159",className:"bg-white rounded-xl border border-gray-200 p-6 space-y-5",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1160",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:1161",className:"text-lg font-bold text-gray-900",children:"Compose Newsletter"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1162",className:"text-sm text-gray-500 mt-1",children:"Send a newsletter email to all subscribers."})]}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:1165",label:"Subject",required:!0,children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:1166",type:"text",value:t,onChange:j=>m(j.target.value),placeholder:"e.g. March Update — What's Coming Next",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:1175",label:"Body (HTML)",required:!0,children:e.jsx("textarea",{"data-loc":"client/src/pages/AdminPage.tsx:1176",rows:12,value:l,onChange:j=>p(j.target.value),placeholder:`<p>Hey there!</p>
<p>Here's what's new at PsychedBox...</p>
<p>— The PsychedBox Team</p>`,className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm font-mono focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none resize-y"})}),l.trim()&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1187",children:[e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1188",onClick:()=>s(!r),className:"text-sm text-[#FF6B6B] font-semibold hover:underline flex items-center gap-1",children:[r?e.jsx(te,{"data-loc":"client/src/pages/AdminPage.tsx:1192",size:14}):e.jsx(ce,{"data-loc":"client/src/pages/AdminPage.tsx:1192",size:14}),r?"Hide Preview":"Show Preview"]}),r&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1196",className:"mt-3 border border-gray-200 rounded-lg p-4 bg-gray-50",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1197",className:"text-xs text-gray-400 mb-2 uppercase tracking-wide",children:"Preview"}),e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1198",className:"prose prose-sm max-w-none",dangerouslySetInnerHTML:{__html:l}})]})]}),x&&e.jsx(V,{"data-loc":"client/src/pages/AdminPage.tsx:1204",message:x}),d&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1207",className:"flex items-center gap-2 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg text-sm",children:[e.jsx(K,{"data-loc":"client/src/pages/AdminPage.tsx:1208",size:16}),"Sent ",d.sent," of ",d.total," emails.",d.failed>0&&` (${d.failed} failed)`]}),e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1213",onClick:h,disabled:c||!t.trim()||!l.trim(),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-bold text-white disabled:opacity-50",style:{backgroundColor:"#FF6B6B"},children:[c?e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:1219",size:16,className:"animate-spin"}):e.jsx(I,{"data-loc":"client/src/pages/AdminPage.tsx:1219",size:16}),c?"Sending...":"Send to All Subscribers"]})]})}function Ce(){const[t,m]=a.useState([]),[l,p]=a.useState(!0),[c,g]=a.useState(null),[d,y]=a.useState({}),[x,b]=a.useState({});a.useEffect(()=>{f("/api/admin/blog").then(s=>m(s.posts.filter(h=>h.published))).finally(()=>p(!1))},[]);async function r(s,h){if(confirm(`Notify all subscribers about "${h}"?`)){g(s),b(j=>{const n={...j};return delete n[s],n});try{const j=await f(`/api/admin/email/blog-notify/${s}`,{method:"POST"});y(n=>({...n,[s]:j}))}catch(j){b(n=>({...n,[s]:j.message}))}finally{g(null)}}}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1256",className:"bg-white rounded-xl border border-gray-200 p-6 space-y-5",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1257",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:1258",className:"text-lg font-bold text-gray-900",children:"Blog Post Notifications"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1259",className:"text-sm text-gray-500 mt-1",children:"Notify all subscribers about a published blog post."})]}),l?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:1263"}):t.length===0?e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1265",className:"text-gray-500 text-sm",children:"No published blog posts yet."}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1267",className:"space-y-3",children:t.map(s=>e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1269",className:"flex items-center justify-between gap-4 border border-gray-100 rounded-lg px-4 py-3",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1273",className:"min-w-0",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1274",className:"font-semibold text-gray-900 text-sm truncate",children:s.title}),e.jsxs("p",{"data-loc":"client/src/pages/AdminPage.tsx:1275",className:"text-xs text-gray-400",children:[s.category," · ",s.author," · ",new Date(s.created_at).toLocaleDateString()]})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1279",className:"flex items-center gap-3 shrink-0",children:[d[s.id]&&e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1281",className:"text-xs text-green-600 flex items-center gap-1",children:[e.jsx(K,{"data-loc":"client/src/pages/AdminPage.tsx:1282",size:12})," ",d[s.id].sent," sent"]}),x[s.id]&&e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1286",className:"text-xs text-red-500 flex items-center gap-1",children:[e.jsx(X,{"data-loc":"client/src/pages/AdminPage.tsx:1287",size:12})," ",x[s.id]]}),e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1290",onClick:()=>r(s.id,s.title),disabled:c===s.id,className:"inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold text-white disabled:opacity-50",style:{backgroundColor:"#1a1a1a"},children:[c===s.id?e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:1297",size:12,className:"animate-spin"}):e.jsx(I,{"data-loc":"client/src/pages/AdminPage.tsx:1299",size:12}),"Notify"]})]})]},s.id))})]})}function ke(){const{user:t}=Q(),[m,l]=a.useState(t?.email||""),[p,c]=a.useState("welcome"),[g,d]=a.useState(!1),[y,x]=a.useState(null),[b,r]=a.useState("");async function s(){if(m.trim()){d(!0),r(""),x(null);try{const h=await f("/api/admin/email/test",{method:"POST",body:JSON.stringify({to:m,template:p})});x(h)}catch(h){r(h.message)}finally{d(!1)}}}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1339",className:"bg-white rounded-xl border border-gray-200 p-6 space-y-5",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1340",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:1341",className:"text-lg font-bold text-gray-900",children:"Send Test Email"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1342",className:"text-sm text-gray-500 mt-1",children:"Preview how email templates look by sending a test to yourself."})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1345",className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:1346",label:"Recipient",children:e.jsx("input",{"data-loc":"client/src/pages/AdminPage.tsx:1347",type:"email",value:m,onChange:h=>l(h.target.value),placeholder:"your@email.com",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none"})}),e.jsx(N,{"data-loc":"client/src/pages/AdminPage.tsx:1356",label:"Template",children:e.jsxs("select",{"data-loc":"client/src/pages/AdminPage.tsx:1357",value:p,onChange:h=>c(h.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none bg-white",children:[e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:1362",value:"welcome",children:"Welcome (signup)"}),e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:1363",value:"subscriber",children:"Subscriber Welcome"}),e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:1364",value:"order",children:"Order Confirmation"}),e.jsx("option",{"data-loc":"client/src/pages/AdminPage.tsx:1365",value:"payment-failed",children:"Payment Failed"})]})})]}),b&&e.jsx(V,{"data-loc":"client/src/pages/AdminPage.tsx:1370",message:b}),y&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1373",className:`flex items-center gap-2 px-4 py-3 rounded-lg text-sm border ${y.sent?"bg-green-50 border-green-200 text-green-700":"bg-red-50 border-red-200 text-red-700"}`,children:[y.sent?e.jsx(K,{"data-loc":"client/src/pages/AdminPage.tsx:1378",size:16}):e.jsx(X,{"data-loc":"client/src/pages/AdminPage.tsx:1378",size:16}),y.sent?`Test email sent to ${y.to}`:"Failed to send test email"]}),e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1383",onClick:s,disabled:g||!m.trim(),className:"inline-flex items-center gap-2 px-5 py-2.5 rounded-lg text-sm font-bold text-white disabled:opacity-50",style:{backgroundColor:"#FF6B6B"},children:[g?e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:1389",size:16,className:"animate-spin"}):e.jsx(I,{"data-loc":"client/src/pages/AdminPage.tsx:1389",size:16}),g?"Sending...":"Send Test"]})]})}function Be(){const[t,m]=a.useState([]),[l,p]=a.useState(!0),[c,g]=a.useState(null),[d,y]=a.useState("SELECT * FROM users LIMIT 10"),[x,b]=a.useState(null),[r,s]=a.useState(""),[h,j]=a.useState(!1);a.useEffect(()=>{f("/api/admin/db/tables").then(u=>m(u.tables)).finally(()=>p(!1))},[]);async function n(){s(""),b(null),j(!0);try{const u=await f(`/api/admin/db/query?sql=${encodeURIComponent(d)}`);b(u)}catch(u){s(u.message)}finally{j(!1)}}return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1426",className:"space-y-6",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1428",className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:1429",className:"text-lg font-bold text-gray-900 mb-4",children:"Schema Overview"}),l?e.jsx(z,{"data-loc":"client/src/pages/AdminPage.tsx:1431"}):e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1433",className:"space-y-2",children:t.map(u=>e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1435",className:"border border-gray-100 rounded-lg",children:[e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1436",onClick:()=>g(c===u.name?null:u.name),className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-gray-50",children:[e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1440",className:"flex items-center gap-3",children:[e.jsx(se,{"data-loc":"client/src/pages/AdminPage.tsx:1441",size:14,className:"text-gray-400"}),e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:1442",className:"font-mono text-sm font-medium text-gray-900",children:u.name}),e.jsxs("span",{"data-loc":"client/src/pages/AdminPage.tsx:1443",className:"text-xs text-gray-400",children:[u.rowCount," rows"]})]}),c===u.name?e.jsx(ae,{"data-loc":"client/src/pages/AdminPage.tsx:1445",size:14,className:"text-gray-400"}):e.jsx(ee,{"data-loc":"client/src/pages/AdminPage.tsx:1445",size:14,className:"text-gray-400"})]}),c===u.name&&e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1448",className:"px-4 pb-3",children:e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:1449",className:"w-full text-xs",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:1450",children:e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:1451",className:"text-gray-500",children:[e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:1452",className:"text-left py-1",children:"Column"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:1453",className:"text-left py-1",children:"Type"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:1454",className:"text-left py-1",children:"PK"}),e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:1455",className:"text-left py-1",children:"Not Null"})]})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:1458",children:u.columns.map(v=>e.jsxs("tr",{"data-loc":"client/src/pages/AdminPage.tsx:1460",className:"border-t border-gray-50",children:[e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1461",className:"py-1 font-mono text-gray-900",children:v.name}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1462",className:"py-1 text-gray-500",children:v.type}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1463",className:"py-1",children:v.pk?"Yes":""}),e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1464",className:"py-1",children:v.notnull?"Yes":""})]},v.name))})]})})]},u.name))})]}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1478",className:"bg-white rounded-xl border border-gray-200 p-6",children:[e.jsx("h3",{"data-loc":"client/src/pages/AdminPage.tsx:1479",className:"text-lg font-bold text-gray-900 mb-4",children:"SQL Query Runner"}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1480",className:"text-xs text-gray-400 mb-3",children:"Read-only: SELECT and PRAGMA queries only"}),e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1481",className:"flex gap-2",children:[e.jsx("textarea",{"data-loc":"client/src/pages/AdminPage.tsx:1482",rows:2,value:d,onChange:u=>y(u.target.value),onKeyDown:u=>{u.key==="Enter"&&(u.metaKey||u.ctrlKey)&&n()},className:"flex-1 font-mono text-sm rounded-lg border border-gray-300 px-3 py-2 focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none resize-y",placeholder:"SELECT * FROM users LIMIT 10"}),e.jsxs("button",{"data-loc":"client/src/pages/AdminPage.tsx:1490",onClick:n,disabled:h||!d.trim(),className:"self-start inline-flex items-center gap-1.5 px-4 py-2 rounded-lg text-sm font-semibold text-white disabled:opacity-50",style:{backgroundColor:"#1a1a1a"},children:[h?e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:1496",size:14,className:"animate-spin"}):e.jsx(he,{"data-loc":"client/src/pages/AdminPage.tsx:1496",size:14}),"Run"]})]}),r&&e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1501",className:"mt-3 bg-red-50 border border-red-200 text-red-700 px-3 py-2 rounded text-sm",children:r}),x&&e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1504",className:"mt-4 overflow-x-auto",children:[e.jsxs("p",{"data-loc":"client/src/pages/AdminPage.tsx:1505",className:"text-xs text-gray-400 mb-2",children:[x.count," rows returned"]}),x.rows.length>0&&e.jsxs("table",{"data-loc":"client/src/pages/AdminPage.tsx:1507",className:"w-full text-xs",children:[e.jsx("thead",{"data-loc":"client/src/pages/AdminPage.tsx:1508",children:e.jsx("tr",{"data-loc":"client/src/pages/AdminPage.tsx:1509",className:"text-gray-500 border-b border-gray-100",children:Object.keys(x.rows[0]).map(u=>e.jsx("th",{"data-loc":"client/src/pages/AdminPage.tsx:1511",className:"text-left px-3 py-2 font-medium whitespace-nowrap",children:u},u))})}),e.jsx("tbody",{"data-loc":"client/src/pages/AdminPage.tsx:1515",children:x.rows.map((u,v)=>e.jsx("tr",{"data-loc":"client/src/pages/AdminPage.tsx:1517",className:"border-b border-gray-50 hover:bg-gray-50",children:Object.values(u).map((w,C)=>e.jsx("td",{"data-loc":"client/src/pages/AdminPage.tsx:1519",className:"px-3 py-1.5 text-gray-700 whitespace-nowrap max-w-xs truncate",title:String(w),children:String(w??"NULL")},C))},v))})]})]})]})]})}function O({label:t,value:m}){return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1539",className:"bg-white rounded-xl border border-gray-200 p-4",children:[e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1540",className:"text-xs text-gray-500 uppercase tracking-wide",children:t}),e.jsx("p",{"data-loc":"client/src/pages/AdminPage.tsx:1541",className:"text-2xl font-black text-gray-900 mt-1",children:m})]})}function z(){return e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1548",className:"flex items-center justify-center py-12",children:e.jsx(D,{"data-loc":"client/src/pages/AdminPage.tsx:1549",size:24,className:"animate-spin text-gray-400"})})}function V({message:t}){return e.jsx("div",{"data-loc":"client/src/pages/AdminPage.tsx:1555",className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:t})}function N({label:t,required:m,children:l}){return e.jsxs("div",{"data-loc":"client/src/pages/AdminPage.tsx:1560",children:[e.jsxs("label",{"data-loc":"client/src/pages/AdminPage.tsx:1561",className:"block text-sm font-semibold text-gray-700 mb-1.5",children:[t," ",m&&e.jsx("span",{"data-loc":"client/src/pages/AdminPage.tsx:1562",className:"text-red-400",children:"*"})]}),l]})}export{ze as default};
//# sourceMappingURL=AdminPage-BrT8MyYe.js.map
