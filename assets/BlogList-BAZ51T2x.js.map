{"version":3,"file":"BlogList-BAZ51T2x.js","sources":["../../../client/src/pages/BlogList.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { Clock, ArrowRight } from \"lucide-react\";\nimport SiteFooter from \"@/components/SiteFooter\";\nimport SiteNavbar from \"@/components/SiteNavbar\";\nimport NewsletterForm from \"@/components/NewsletterForm\";\nimport { useSEO } from \"@/hooks/useSEO\";\nimport { useJsonLd } from \"@/hooks/useJsonLd\";\nimport { allCategories as fallbackCategories, type BlogCategory, type BlogPost } from \"@/data/blog-posts\";\nimport axios from \"axios\";\n\nconst blogListSchema = {\n  \"@context\": \"https://schema.org\",\n  \"@type\": \"Blog\",\n  name: \"PsychedBox Blog\",\n  description:\n    \"Guides, stories, and insights on psychedelic harm reduction, ceremony, art, community, and wellness.\",\n  url: \"https://psychedbox.com/blog\",\n  publisher: {\n    \"@type\": \"Organization\",\n    name: \"PsychedBox\",\n    url: \"https://psychedbox.com\",\n  },\n};\n\nconst categoryColors: Record<BlogCategory, string> = {\n  \"Harm Reduction\": \"#059669\",\n  Community: \"#7C3AED\",\n  \"Art & Culture\": \"#FF6B6B\",\n  Ceremony: \"#D97706\",\n  Wellness: \"#2563EB\",\n  News: \"#475569\",\n};\n\nfunction formatDate(iso: string) {\n  return new Date(iso).toLocaleDateString(\"en-US\", {\n    year: \"numeric\",\n    month: \"long\",\n    day: \"numeric\",\n  });\n}\n\nexport default function BlogList() {\n  const [activeCategory, setActiveCategory] = useState<BlogCategory | \"All\">(\n    \"All\"\n  );\n  const [posts, setPosts] = useState<BlogPost[]>([]);\n  const [categories, setCategories] = useState<BlogCategory[]>([]);\n\n  // Try loading posts from the API; fall back to hardcoded data on failure\n  useEffect(() => {\n    let cancelled = false;\n    axios\n      .get<{ posts: BlogPost[] }>(\"/api/blog\")\n      .then(({ data }) => {\n        if (!cancelled) {\n          setPosts(data.posts);\n          const cats = Array.from(new Set(data.posts.map((p) => p.category))) as BlogCategory[];\n          setCategories(cats);\n        }\n      })\n      .catch(() => {\n        // API unavailable (static hosting) — show nothing\n        setPosts([]);\n        setCategories([]);\n      });\n    return () => { cancelled = true; };\n  }, []);\n\n  useSEO({\n    title: \"Blog — Guides on Psychedelic Harm Reduction, Ceremony, Art & Wellness\",\n    description:\n      \"Guides, stories, and insights on psychedelic harm reduction, ceremony, art, community, and wellness from the PsychedBox team.\",\n    canonical: \"/blog\",\n  });\n  useJsonLd(blogListSchema);\n\n  const filtered =\n    activeCategory === \"All\"\n      ? posts\n      : posts.filter((p) => p.category === activeCategory);\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <SiteNavbar />\n\n      {/* Hero */}\n      <section\n        style={{ backgroundColor: \"#1a1a1a\" }}\n        className=\"px-6 py-16 md:py-20\"\n      >\n        <div className=\"max-w-5xl mx-auto\">\n          <p className=\"text-white/60 text-xs uppercase tracking-[0.2em] font-bold mb-4\">\n            Blog\n          </p>\n          <h1 className=\"text-white text-4xl md:text-6xl font-black leading-tight max-w-3xl mb-6\">\n            Guides, Stories &amp; Insights\n          </h1>\n          <p className=\"text-white/80 text-lg md:text-xl max-w-2xl\">\n            Harm reduction, ceremony, art history, and community wisdom — all in\n            one place.\n          </p>\n        </div>\n      </section>\n\n      {/* Category Filters */}\n      <section className=\"sticky top-[52px] z-30 bg-white border-b border-gray-200 px-6 py-4\">\n        <div className=\"max-w-5xl mx-auto flex items-center gap-3 overflow-x-auto\">\n          <button\n            onClick={() => setActiveCategory(\"All\")}\n            className={`px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors ${\n              activeCategory === \"All\"\n                ? \"bg-gray-900 text-white\"\n                : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n            }`}\n          >\n            All\n          </button>\n          {categories.map((cat) => (\n            <button\n              key={cat}\n              onClick={() => setActiveCategory(cat)}\n              className={`px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap transition-colors ${\n                activeCategory === cat\n                  ? \"bg-gray-900 text-white\"\n                  : \"bg-gray-100 text-gray-600 hover:bg-gray-200\"\n              }`}\n            >\n              {cat}\n            </button>\n          ))}\n        </div>\n      </section>\n\n      {/* Post Grid */}\n      <section className=\"px-6 py-12\">\n        <div className=\"max-w-5xl mx-auto\">\n          <p className=\"text-gray-500 text-sm mb-8\">\n            {filtered.length} {filtered.length === 1 ? \"article\" : \"articles\"}\n          </p>\n\n          {/* Featured post (first) */}\n          {filtered.length > 0 && (\n            <a\n              href={`/blog/${filtered[0].slug}`}\n              className=\"group block mb-12\"\n            >\n              <article className=\"grid grid-cols-1 md:grid-cols-2 gap-8 items-center\">\n                <div className=\"aspect-[16/9] overflow-hidden rounded-lg bg-gray-100\">\n                  <img\n                    src={filtered[0].image}\n                    alt={filtered[0].imageAlt}\n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                  />\n                </div>\n                <div>\n                  <span\n                    className=\"inline-block text-xs font-bold uppercase tracking-wider px-2 py-1 rounded-md text-white mb-3\"\n                    style={{\n                      backgroundColor:\n                        categoryColors[filtered[0].category] ?? \"#475569\",\n                    }}\n                  >\n                    {filtered[0].category}\n                  </span>\n                  <h2 className=\"text-2xl md:text-3xl font-black text-gray-900 mb-3 group-hover:text-[#FF6B6B] transition-colors\">\n                    {filtered[0].title}\n                  </h2>\n                  <p className=\"text-gray-600 mb-4\">\n                    {filtered[0].description}\n                  </p>\n                  <div className=\"flex items-center gap-4 text-gray-400 text-sm\">\n                    <span>{formatDate(filtered[0].date)}</span>\n                    <span className=\"flex items-center gap-1\">\n                      <Clock size={14} /> {filtered[0].readTime}\n                    </span>\n                  </div>\n                </div>\n              </article>\n            </a>\n          )}\n\n          {/* Remaining posts */}\n          {filtered.length > 1 && (\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8\">\n              {filtered.slice(1).map((post) => (\n                <a\n                  key={post.slug}\n                  href={`/blog/${post.slug}`}\n                  className=\"group block\"\n                >\n                  <article>\n                    <div className=\"aspect-[16/9] overflow-hidden rounded-lg bg-gray-100 mb-4\">\n                      <img\n                        src={post.image}\n                        alt={post.imageAlt}\n                        loading=\"lazy\"\n                        className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\n                      />\n                    </div>\n                    <span\n                      className=\"inline-block text-xs font-bold uppercase tracking-wider px-2 py-1 rounded-md text-white mb-2\"\n                      style={{\n                        backgroundColor:\n                          categoryColors[post.category] ?? \"#475569\",\n                      }}\n                    >\n                      {post.category}\n                    </span>\n                    <h3 className=\"text-lg font-bold text-gray-900 mb-2 group-hover:text-[#FF6B6B] transition-colors leading-tight\">\n                      {post.title}\n                    </h3>\n                    <p className=\"text-gray-500 text-sm mb-3 line-clamp-2\">\n                      {post.description}\n                    </p>\n                    <div className=\"flex items-center gap-4 text-gray-400 text-xs\">\n                      <span>{formatDate(post.date)}</span>\n                      <span className=\"flex items-center gap-1\">\n                        <Clock size={12} /> {post.readTime}\n                      </span>\n                    </div>\n                  </article>\n                </a>\n              ))}\n            </div>\n          )}\n\n          {filtered.length === 0 && (\n            <div className=\"text-center py-20\">\n              <p className=\"text-gray-400 text-lg\">\n                No posts in this category yet. Check back soon!\n              </p>\n            </div>\n          )}\n        </div>\n      </section>\n\n      {/* Newsletter CTA */}\n      <section\n        style={{ backgroundColor: \"#F0F0F0\" }}\n        className=\"py-16 px-6\"\n      >\n        <div className=\"max-w-2xl mx-auto text-center\">\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-3\">\n            Get New Posts in Your Inbox\n          </h2>\n          <p className=\"text-gray-600 mb-6\">\n            We publish guides, community stories, and harm reduction resources\n            every week. Subscribe to stay informed.\n          </p>\n          <NewsletterForm source=\"blog\" showIcon className=\"max-w-md mx-auto\" />\n        </div>\n      </section>\n\n      <SiteFooter />\n    </div>\n  );\n}\n"],"names":["blogListSchema","categoryColors","formatDate","iso","BlogList","activeCategory","setActiveCategory","useState","posts","setPosts","categories","setCategories","useEffect","cancelled","axios","data","cats","p","useSEO","useJsonLd","filtered","jsxs","jsx","SiteNavbar","cat","Clock","post","NewsletterForm","SiteFooter"],"mappings":"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"}