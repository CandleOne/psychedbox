{"version":3,"file":"ResetPasswordPage-LvjGVmtT.js","sources":["../../../client/src/pages/ResetPasswordPage.tsx"],"sourcesContent":["import SiteFooter from \"@/components/SiteFooter\";\nimport SiteNavbar from \"@/components/SiteNavbar\";\nimport { useSEO } from \"@/hooks/useSEO\";\nimport { Loader2, CheckCircle, AlertTriangle } from \"lucide-react\";\nimport { useState, type FormEvent } from \"react\";\nimport { Link, useSearch } from \"wouter\";\n\nexport default function ResetPasswordPage() {\n  useSEO({\n    title: \"Reset Password — PsychedBox\",\n    description: \"Set a new password for your PsychedBox account.\",\n    canonical: \"/reset-password\",\n  });\n\n  const search = useSearch();\n  const params = new URLSearchParams(search);\n  const token = params.get(\"token\");\n\n  const [password, setPassword] = useState(\"\");\n  const [confirm, setConfirm] = useState(\"\");\n  const [error, setError] = useState(\"\");\n  const [loading, setLoading] = useState(false);\n  const [success, setSuccess] = useState(false);\n\n  async function handleSubmit(e: FormEvent) {\n    e.preventDefault();\n    setError(\"\");\n\n    if (password.length < 8) {\n      setError(\"Password must be at least 8 characters\");\n      return;\n    }\n    if (password !== confirm) {\n      setError(\"Passwords do not match\");\n      return;\n    }\n\n    setLoading(true);\n    try {\n      const res = await fetch(\"/api/auth/reset-password\", {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ token, password }),\n        credentials: \"include\",\n      });\n      const data = await res.json();\n      if (!res.ok) {\n        setError(data.error || \"Something went wrong\");\n      } else {\n        setSuccess(true);\n      }\n    } catch {\n      setError(\"Network error. Please try again.\");\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  if (!token) {\n    return (\n      <div className=\"min-h-screen bg-white\">\n        <SiteNavbar />\n        <section style={{ backgroundColor: \"#FF6B6B\" }} className=\"px-6 py-16 md:py-20\">\n          <div className=\"max-w-5xl mx-auto\">\n            <p className=\"text-white/80 text-xs uppercase tracking-[0.2em] font-bold mb-4\">Account</p>\n            <h1 className=\"text-white text-4xl md:text-6xl font-black leading-tight max-w-3xl mb-6\">Reset Password</h1>\n          </div>\n        </section>\n        <section className=\"px-6 py-16\">\n          <div className=\"max-w-md mx-auto text-center space-y-4\">\n            <AlertTriangle size={48} className=\"mx-auto text-yellow-500\" />\n            <h2 className=\"text-xl font-bold text-gray-900\">Invalid reset link</h2>\n            <p className=\"text-gray-600\">This link is missing a reset token. Please request a new password reset.</p>\n            <Link\n              href=\"/forgot-password\"\n              style={{ backgroundColor: \"#1a1a1a\" }}\n              className=\"inline-flex items-center justify-center px-6 py-3 rounded-lg text-white font-bold hover:opacity-90 transition-opacity\"\n            >\n              Request New Link\n            </Link>\n          </div>\n        </section>\n        <SiteFooter />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white\">\n      <SiteNavbar />\n\n      <section style={{ backgroundColor: \"#FF6B6B\" }} className=\"px-6 py-16 md:py-20\">\n        <div className=\"max-w-5xl mx-auto\">\n          <p className=\"text-white/80 text-xs uppercase tracking-[0.2em] font-bold mb-4\">Account</p>\n          <h1 className=\"text-white text-4xl md:text-6xl font-black leading-tight max-w-3xl mb-6\">Set New Password</h1>\n          <p className=\"text-white text-lg md:text-xl max-w-3xl\">Choose a new password for your account.</p>\n        </div>\n      </section>\n\n      <section className=\"px-6 py-16\">\n        <div className=\"max-w-md mx-auto\">\n          {success ? (\n            <div className=\"text-center space-y-4\">\n              <CheckCircle size={48} className=\"mx-auto text-green-500\" />\n              <h2 className=\"text-xl font-bold text-gray-900\">Password updated!</h2>\n              <p className=\"text-gray-600\">Your password has been reset successfully. You can now log in with your new password.</p>\n              <Link\n                href=\"/login\"\n                style={{ backgroundColor: \"#1a1a1a\" }}\n                className=\"inline-flex items-center justify-center px-6 py-3 rounded-lg text-white font-bold hover:opacity-90 transition-opacity\"\n              >\n                Log In\n              </Link>\n            </div>\n          ) : (\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\n              {error && (\n                <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm\">\n                  {error}\n                </div>\n              )}\n\n              <div>\n                <label htmlFor=\"password\" className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\n                  New Password\n                </label>\n                <input\n                  id=\"password\"\n                  type=\"password\"\n                  required\n                  autoComplete=\"new-password\"\n                  value={password}\n                  onChange={(e) => setPassword(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 px-4 py-2.5 text-gray-900 focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none\"\n                  placeholder=\"••••••••\"\n                  minLength={8}\n                />\n              </div>\n\n              <div>\n                <label htmlFor=\"confirm\" className=\"block text-sm font-semibold text-gray-700 mb-1.5\">\n                  Confirm New Password\n                </label>\n                <input\n                  id=\"confirm\"\n                  type=\"password\"\n                  required\n                  autoComplete=\"new-password\"\n                  value={confirm}\n                  onChange={(e) => setConfirm(e.target.value)}\n                  className=\"w-full rounded-lg border border-gray-300 px-4 py-2.5 text-gray-900 focus:border-[#FF6B6B] focus:ring-2 focus:ring-[#FF6B6B]/20 outline-none\"\n                  placeholder=\"••••••••\"\n                  minLength={8}\n                />\n              </div>\n\n              <button\n                type=\"submit\"\n                disabled={loading}\n                style={{ backgroundColor: \"#1a1a1a\" }}\n                className=\"w-full flex items-center justify-center gap-2 rounded-lg px-6 py-3 text-white font-bold hover:opacity-90 transition-opacity disabled:opacity-50\"\n              >\n                {loading && <Loader2 size={16} className=\"animate-spin\" />}\n                {loading ? \"Resetting…\" : \"Reset Password\"}\n              </button>\n            </form>\n          )}\n        </div>\n      </section>\n\n      <SiteFooter />\n    </div>\n  );\n}\n"],"names":["ResetPasswordPage","useSEO","search","useSearch","token","password","setPassword","useState","confirm","setConfirm","error","setError","loading","setLoading","success","setSuccess","handleSubmit","e","res","data","jsxs","jsx","SiteNavbar","CheckCircle","Link","Loader2","SiteFooter","AlertTriangle"],"mappings":"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"}